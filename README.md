# 说明

## 加密

1.一对rsa公私钥,服务器拿私钥,公钥发给客户端

2.客户端生成一个aes256密钥,使用公钥加密发给服务器

3.所有的加密数据(会写经过加密)都用这个密钥进行aes256加密

## 帐号

uid是帐号唯一不会变的标识,是int值,代表帐号注册时已注册人数(例如第一个帐号注册的uid是0),在数据库里以字符串形式储存

帐号注册时需要邮箱,邮箱验证码和密码,邮箱验证码不储存,用户名之类的可以让用户自己写进个人主页

用户自己的主页,博客可以高度自定义,即让用户自己写html,公开一些api,用户可以调用它们来改善自己的主页,博客,比如在主页里插入博客列表

## 域名

所有不是"oiers.org"的域名统一解析到"oiers.org",包括"api.oiers.org"(前后端分离这个可以不解析到oiers.org)

## 文章

文章是以uid和文章名来标识的,所以每个用户的文章名不能有重复

## 其他

编码统一utf8

所有json的键都是字符串

如果请求有多余的值,会忽略而不是报错

# 帐号相关

## 获取邮箱验证码

### 请求

|路径|https://api.oiers.org/account/captcha|
|--|--|
|方法|post|
|请求头|无特殊要求|
|内容格式|json|
|其他要求|无|

|键|值|值类型|
|--|--|--|
|email|邮箱地址|str|

### 响应

|响应头|无特殊内容|
|--|--|
|响应格式|json|

|键|值|值类型|
|--|--|--|
|succes|是否成功|bool|
|message|如果成功,则是邮箱验证码,否则是失败信息|str|

## 注册帐号

### 请求

|路径|https://api.oiers.org/account/register|
|--|--|
|方法|post|
|请求头|无特殊要求|
|内容格式|json|
|其他要求|需要先发送邮箱验证码|

|键|值|值类型|
|--|--|--|
|email|邮箱|str|
|captcha|邮箱验证码|str|
|password|密码(加密)|str|

### 响应

|响应头|无特殊内容|
|--|--|
|响应格式|json|

|键|值|值类型|
|--|--|--|
|succes|是否成功|bool|
|message|信息,直接显示即可|str|

## 登录帐号

### 请求

|路径|https://api.oiers.org/account/login|
|--|--|
|方法|post|
|请求头|无特殊要求|
|内容格式|json|
|其他要求|无|

|键|值|值类型|
|--|--|--|
|email|邮箱|str|
|password|密码(加密)|str|

### 响应

|响应头|无特殊内容|
|--|--|
|响应格式|json|

|键|值|值类型|
|--|--|--|
|succes|是否成功|bool|
|message|如果成功,则是一个token(加密),否则是失败信息|str|

## 更换邮箱

### 请求

|路径|https://api.oiers.org/account/change_email|
|--|--|
|方法|post|
|请求头|无特殊要求|
|内容格式|json|
|其他要求|先对新邮箱获取邮箱验证码并登录|

|键|值|值类型|
|--|--|--|
|old|旧邮箱地址|str|
|token|登录获取的token(加密)|str|
|new|新邮箱地址|str|
|captcha|新邮箱的验证码|str|

### 响应

|响应头|无特殊内容|
|--|--|
|响应格式|json|

|键|值|值类型|
|--|--|--|
|succes|是否成功|bool|
|message|信息,直接显示即可|str|

## 更换密码

### 请求

|路径|https://api.oiers.org/account/change_password|
|--|--|
|方法|post|
|请求头|无特殊要求|
|内容格式|json|
|其他要求|先登录并获取邮箱验证码|

|键|值|值类型|
|--|--|--|
|old|旧密码(加密)|str|
|token|登录获取的token(加密)|str|
|new|新密码(加密)|str|
|captcha|邮箱验证码|str|

### 响应

|响应头|无特殊内容|
|--|--|
|响应格式|json|

|键|值|值类型|
|--|--|--|
|succes|是否成功|bool|
|message|信息,直接显示即可|str|

# 用户数据相关

## 获取自己的域名列表

### 请求

|路径|https://api.oiers.org/user/get_domain|
|--|--|
|方法|post|
|请求头|无特殊要求|
|内容格式|json|
|其他要求|先登录|

|键|值|值类型|
|--|--|--|
|token|登录获取的token(加密)|str|

### 响应

|响应头|无特殊内容|
|--|--|
|响应格式|json|

|键|值|值类型|
|--|--|--|
|succes|是否成功|bool|
|message|如果成功,则是域名列表,否则是失败信息|list/str|

## 更新自己的域名列表

### 请求

|路径|https://api.oiers.org/user/update_domain|
|--|--|
|方法|post|
|请求头|无特殊要求|
|内容格式|json|
|其他要求|先登录|

|键|值|值类型|
|--|--|--|
|token|登录获取的token(加密)|str|

### 响应

|响应头|无特殊内容|
|--|--|
|响应格式|json|

|键|值|值类型|
|--|--|--|
|succes|是否成功|bool|
|message|信息,直接显示即可|str|

## 获取个人信息

### 请求

|路径|https://api.oiers.org/user/get_data|
|--|--|
|方法|post|
|请求头|无特殊要求|
|内容格式|json|
|其他要求|先登录|

|键|值|值类型|
|--|--|--|
|token|登录获取的token(加密)|str|
|time|注册时间(单位秒,以python的time.time()为标准)|str|

### 响应

|响应头|无特殊内容|
|--|--|
|响应格式|json|

|键|值|值类型|
|--|--|--|
|succes|是否成功|bool|
|message|如果成功,则是用户信息(json),否则是失败信息|obj/str|

|键|值|值类型|
|--|--|--|
|uid|用户uid|int|

## 用户主页

https://\<自定义域名\>/

或

https://oiers.org/user/\<uid\>/

# 文章相关

## 获取用户文章列表

### 请求

|路径|https://api.oiers.org/blog/get_blogs|
|--|--|
|方法|post|
|请求头|无特殊要求|
|内容格式|json|
|其他要求|无|

|键|值|值类型|
|--|--|--|
|uid|被获取文章列表的uid|str|

### 响应

|响应头|无特殊内容|
|--|--|
|响应格式|json|

|键|值|值类型|
|--|--|--|
|succes|是否成功|bool|
|message|如果成功,则是该uid的文章名列表,否则是失败信息|list/str|

## 获取文章数据

### 请求

|路径|https://api.oiers.org/blog/get_data|
|--|--|
|方法|post|
|请求头|无特殊要求|
|内容格式|json|
|其他要求|无|

|键|值|值类型|
|--|--|--|
|uid|被获取指定文章的uid|str|
|name|文章名|str|

### 响应

|响应头|无特殊内容|
|--|--|
|响应格式|json|

|键|值|值类型|
|--|--|--|
|succes|是否成功|bool|
|message|如果成功,则是文章信息(格式由用户决定,一般直接显示即可),否则是失败信息|str|

## 更新文章数据(如果不存在则添加文章)

### 请求

|路径|https://api.oiers.org/blog/update_data|
|--|--|
|方法|post|
|请求头|无特殊要求|
|内容格式|json|
|其他要求|先登录|

|键|值|值类型|
|--|--|--|
|name|文章名|str|
|token|登录获取的token(加密)|str|

### 响应

|响应头|无特殊内容|
|--|--|
|响应格式|json|

|键|值|值类型|
|--|--|--|
|succes|是否成功|bool|
|message|信息,直接显示即可|str|

## 文章url

https://\<自定义域名\>/blog/\<文章名\>/

或

https://oiers.org/user/\<uid\>/blog/\<文章名\>/

# 评论区相关

## 获取文章的评论区信息

### 请求

|路径|https://api.oiers.org/comment/get_comment|
|--|--|
|方法|post|
|请求头|无特殊要求|
|内容格式|json|
|其他要求|无|

|键|值|值类型|
|--|--|--|
|uid|被获取评论的文章的用户uid|str|
|name|文章名|str|

### 响应

|响应头|无特殊内容|
|--|--|
|响应格式|json|

|键|值|值类型|
|--|--|--|
|succes|是否成功|bool|
|message|如果成功,则是该文章的评论列表(json),需要遍历它,否则是失败信息|obj/str|

|键|值|值类型|
|--|--|--|
|评论者uid|评论信息|obj|
|...|...|obj|

|键|值|值类型|
|--|--|--|
|data|评论字符串|str|
|time|时间(单位秒,以python的time.time()为标准)|str|

## 添加评论

### 请求

|路径|https://api.oiers.org/comment/add_comment|
|--|--|
|方法|post|
|请求头|无特殊要求|
|内容格式|json|
|其他要求|先登录|

|键|值|值类型|
|--|--|--|
|uid|被评论的文章的用户uid|str|
|name|文章名|str|
|token|登录获取的token(加密)|str|
|data|评论信息(字符串即可,其他的由服务器生成)|str|

### 响应

|响应头|无特殊内容|
|--|--|
|响应格式|json|

|键|值|值类型|
|--|--|--|
|succes|是否成功|bool|
|message|信息,显示即可|str|

# 待补充
